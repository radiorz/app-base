# client-Core

1 根本服务(一级服务)
  - 内存数据库(所谓状态管理) 增删改查(树，基础model的关系)
  - 本地数据库
  - 日志
    - 数据清除定时器
二级服务

1 配置通用协议 通用协议的使用，各种上下接口的对应。
  - 消息处理
  - 消息发送
  - 字典枚举
  
2 应用配置的增删改查 从远端获取
3 基础服务
  - 远端认证
  - 设备间关联
3 基础连接协议的模块封装 driver
  - http api
  - websocket
  - mqtt

4 以上的东西都可以抽象为对于应用的服务
所有服务协议等都应该依赖注入,支持替换。

不过服务之间是有依赖与先后关系的，这个得处理好

5 服务分级
- 影响整个应用可用
- 影响部分功能可用

core 的职责就是将所有的服务统一管理
然后形成应用的底座

并且定义一堆基础的接口等

设备的服务还包括了设备的控制
这种控制通常与底层高度相关
 - gpio等 需要往虚拟设备上注册具体的动作或者动作实例.我们规定每个功能点都是一个盲子设备就可以进行管理了.
 - 串口

子设备的特点就是具备属性变更,动作下发的设备,而远端信息,资源则通过父设备进行获取(当然也可以单独去处理,单独处理就是真的设备)
所以设备也要做好"服务器/代理"的工作

从这方面来说甚至可以让绑在设备上的子设备(通过线直接连接),甚至可以让网络设备与本地子设备绑定进行同步响应,当然一般这种情况比较少(比如主机报警,从设备也报警亮灯)
也就是子设备是自由的.
最重要的就是取决于这个功能到底是独立的设备(设施)还是这个主设备的一个功能.比如通话,其实也可以看做一个虚拟通话子设备,绑定在这个设备上.

